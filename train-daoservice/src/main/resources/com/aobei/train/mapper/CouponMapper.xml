<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aobei.train.mapper.CouponMapper">
  <resultMap id="BaseResultMap" type="com.aobei.train.model.Coupon">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    <id column="coupon_id" jdbcType="BIGINT" property="coupon_id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="descript" jdbcType="VARCHAR" property="descript" />
    <result column="plan_money" jdbcType="INTEGER" property="plan_money" />
    <result column="valid" jdbcType="INTEGER" property="valid" />
    <result column="exclusive" jdbcType="INTEGER" property="exclusive" />
    <result column="num_limit" jdbcType="INTEGER" property="num_limit" />
    <result column="num_total" jdbcType="INTEGER" property="num_total" />
    <result column="num_able" jdbcType="INTEGER" property="num_able" />
    <result column="priority" jdbcType="INTEGER" property="priority" />
    <result column="condition" jdbcType="VARCHAR" property="condition" />
    <result column="condition_type" jdbcType="INTEGER" property="condition_type" />
    <result column="programme" jdbcType="VARCHAR" property="programme" />
    <result column="programme_type" jdbcType="INTEGER" property="programme_type" />
    <result column="type" jdbcType="INTEGER" property="type" />
    <result column="use_start_datetime" jdbcType="TIMESTAMP" property="use_start_datetime" />
    <result column="use_end_datetime" jdbcType="TIMESTAMP" property="use_end_datetime" />
    <result column="receive_start_datetime" jdbcType="TIMESTAMP" property="receive_start_datetime" />
    <result column="create_time" jdbcType="TIMESTAMP" property="create_time" />
    <result column="receive_end_datetime" jdbcType="TIMESTAMP" property="receive_end_datetime" />
    <result column="verify" jdbcType="INTEGER" property="verify" />
    <result column="verify_comments" jdbcType="VARCHAR" property="verify_comments" />
    <result column="create_user" jdbcType="BIGINT" property="create_user" />
    <result column="verify_user" jdbcType="BIGINT" property="verify_user" />
    <result column="is_valid" jdbcType="INTEGER" property="is_valid" />
    <result column="deliver_datetime" jdbcType="TIMESTAMP" property="deliver_datetime" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    coupon_id, name, descript, plan_money, valid, exclusive, num_limit, num_total, num_able, 
    priority, `condition`, condition_type, programme, programme_type, type, use_start_datetime, 
    use_end_datetime, receive_start_datetime, create_time, receive_end_datetime, verify, 
    verify_comments, create_user, verify_user, is_valid, deliver_datetime
  </sql>
  <select id="selectByExample" parameterType="com.aobei.train.model.CouponExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <choose>
      <when test="base_Column_List != null">
        ${base_Column_List}
      </when>
      <otherwise>
        <include refid="Base_Column_List" />
      </otherwise>
    </choose>
    from coupon
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
    <if test="limitStart != null">
      limit ${limitStart} , ${limitEnd}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from coupon
    where coupon_id = #{coupon_id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    delete from coupon
    where coupon_id = #{coupon_id,jdbcType=BIGINT}
  </delete>
  <delete id="deleteByExample" parameterType="com.aobei.train.model.CouponExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    delete from coupon
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.aobei.train.model.Coupon">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    ${_sqlImprovement_ == 1 ? 'replace' : 'insert'} into coupon (coupon_id, name, descript, 
      plan_money, valid, exclusive, 
      num_limit, num_total, num_able, 
      priority, `condition`, condition_type, 
      programme, programme_type, type, 
      use_start_datetime, use_end_datetime, 
      receive_start_datetime, create_time, 
      receive_end_datetime, verify, verify_comments, 
      create_user, verify_user, is_valid, 
      deliver_datetime)
    values (#{coupon_id,jdbcType=BIGINT}, #{name,jdbcType=VARCHAR}, #{descript,jdbcType=VARCHAR}, 
      #{plan_money,jdbcType=INTEGER}, #{valid,jdbcType=INTEGER}, #{exclusive,jdbcType=INTEGER}, 
      #{num_limit,jdbcType=INTEGER}, #{num_total,jdbcType=INTEGER}, #{num_able,jdbcType=INTEGER}, 
      #{priority,jdbcType=INTEGER}, #{condition,jdbcType=VARCHAR}, #{condition_type,jdbcType=INTEGER}, 
      #{programme,jdbcType=VARCHAR}, #{programme_type,jdbcType=INTEGER}, #{type,jdbcType=INTEGER}, 
      #{use_start_datetime,jdbcType=TIMESTAMP}, #{use_end_datetime,jdbcType=TIMESTAMP}, 
      #{receive_start_datetime,jdbcType=TIMESTAMP}, #{create_time,jdbcType=TIMESTAMP}, 
      #{receive_end_datetime,jdbcType=TIMESTAMP}, #{verify,jdbcType=INTEGER}, #{verify_comments,jdbcType=VARCHAR}, 
      #{create_user,jdbcType=BIGINT}, #{verify_user,jdbcType=BIGINT}, #{is_valid,jdbcType=INTEGER}, 
      #{deliver_datetime,jdbcType=TIMESTAMP})
    <if test="_sqlImprovement_ == 2">
      on duplicate key update
      name = #{name,jdbcType=VARCHAR},descript = #{descript,jdbcType=VARCHAR},plan_money = #{plan_money,jdbcType=INTEGER},
      valid = #{valid,jdbcType=INTEGER},exclusive = #{exclusive,jdbcType=INTEGER},num_limit = #{num_limit,jdbcType=INTEGER},
      num_total = #{num_total,jdbcType=INTEGER},num_able = #{num_able,jdbcType=INTEGER},priority = #{priority,jdbcType=INTEGER},
      `condition` = #{condition,jdbcType=VARCHAR},condition_type = #{condition_type,jdbcType=INTEGER},programme = #{programme,jdbcType=VARCHAR},
      programme_type = #{programme_type,jdbcType=INTEGER},type = #{type,jdbcType=INTEGER},use_start_datetime = #{use_start_datetime,jdbcType=TIMESTAMP},
      use_end_datetime = #{use_end_datetime,jdbcType=TIMESTAMP},receive_start_datetime = #{receive_start_datetime,jdbcType=TIMESTAMP},create_time = #{create_time,jdbcType=TIMESTAMP},
      receive_end_datetime = #{receive_end_datetime,jdbcType=TIMESTAMP},verify = #{verify,jdbcType=INTEGER},verify_comments = #{verify_comments,jdbcType=VARCHAR},
      create_user = #{create_user,jdbcType=BIGINT},verify_user = #{verify_user,jdbcType=BIGINT},is_valid = #{is_valid,jdbcType=INTEGER},
      deliver_datetime = #{deliver_datetime,jdbcType=TIMESTAMP}
    </if>
  </insert>
  <insert id="insertSelective" parameterType="com.aobei.train.model.Coupon">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    ${_sqlImprovement_ == 1 ? 'replace' : 'insert'} into coupon
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="coupon_id != null">
        coupon_id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="descript != null">
        descript,
      </if>
      <if test="plan_money != null">
        plan_money,
      </if>
      <if test="valid != null">
        valid,
      </if>
      <if test="exclusive != null">
        exclusive,
      </if>
      <if test="num_limit != null">
        num_limit,
      </if>
      <if test="num_total != null">
        num_total,
      </if>
      <if test="num_able != null">
        num_able,
      </if>
      <if test="priority != null">
        priority,
      </if>
      <if test="condition != null">
        `condition`,
      </if>
      <if test="condition_type != null">
        condition_type,
      </if>
      <if test="programme != null">
        programme,
      </if>
      <if test="programme_type != null">
        programme_type,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="use_start_datetime != null">
        use_start_datetime,
      </if>
      <if test="use_end_datetime != null">
        use_end_datetime,
      </if>
      <if test="receive_start_datetime != null">
        receive_start_datetime,
      </if>
      <if test="create_time != null">
        create_time,
      </if>
      <if test="receive_end_datetime != null">
        receive_end_datetime,
      </if>
      <if test="verify != null">
        verify,
      </if>
      <if test="verify_comments != null">
        verify_comments,
      </if>
      <if test="create_user != null">
        create_user,
      </if>
      <if test="verify_user != null">
        verify_user,
      </if>
      <if test="is_valid != null">
        is_valid,
      </if>
      <if test="deliver_datetime != null">
        deliver_datetime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="coupon_id != null">
        #{coupon_id,jdbcType=BIGINT},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="descript != null">
        #{descript,jdbcType=VARCHAR},
      </if>
      <if test="plan_money != null">
        #{plan_money,jdbcType=INTEGER},
      </if>
      <if test="valid != null">
        #{valid,jdbcType=INTEGER},
      </if>
      <if test="exclusive != null">
        #{exclusive,jdbcType=INTEGER},
      </if>
      <if test="num_limit != null">
        #{num_limit,jdbcType=INTEGER},
      </if>
      <if test="num_total != null">
        #{num_total,jdbcType=INTEGER},
      </if>
      <if test="num_able != null">
        #{num_able,jdbcType=INTEGER},
      </if>
      <if test="priority != null">
        #{priority,jdbcType=INTEGER},
      </if>
      <if test="condition != null">
        #{condition,jdbcType=VARCHAR},
      </if>
      <if test="condition_type != null">
        #{condition_type,jdbcType=INTEGER},
      </if>
      <if test="programme != null">
        #{programme,jdbcType=VARCHAR},
      </if>
      <if test="programme_type != null">
        #{programme_type,jdbcType=INTEGER},
      </if>
      <if test="type != null">
        #{type,jdbcType=INTEGER},
      </if>
      <if test="use_start_datetime != null">
        #{use_start_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="use_end_datetime != null">
        #{use_end_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="receive_start_datetime != null">
        #{receive_start_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="create_time != null">
        #{create_time,jdbcType=TIMESTAMP},
      </if>
      <if test="receive_end_datetime != null">
        #{receive_end_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="verify != null">
        #{verify,jdbcType=INTEGER},
      </if>
      <if test="verify_comments != null">
        #{verify_comments,jdbcType=VARCHAR},
      </if>
      <if test="create_user != null">
        #{create_user,jdbcType=BIGINT},
      </if>
      <if test="verify_user != null">
        #{verify_user,jdbcType=BIGINT},
      </if>
      <if test="is_valid != null">
        #{is_valid,jdbcType=INTEGER},
      </if>
      <if test="deliver_datetime != null">
        #{deliver_datetime,jdbcType=TIMESTAMP},
      </if>
    </trim>
    <if test="_sqlImprovement_ == 2">
      on duplicate key update
      <trim suffixOverrides=",">
        <if test="name != null">
          name = #{name,jdbcType=VARCHAR},
        </if>
        <if test="descript != null">
          descript = #{descript,jdbcType=VARCHAR},
        </if>
        <if test="plan_money != null">
          plan_money = #{plan_money,jdbcType=INTEGER},
        </if>
        <if test="valid != null">
          valid = #{valid,jdbcType=INTEGER},
        </if>
        <if test="exclusive != null">
          exclusive = #{exclusive,jdbcType=INTEGER},
        </if>
        <if test="num_limit != null">
          num_limit = #{num_limit,jdbcType=INTEGER},
        </if>
        <if test="num_total != null">
          num_total = #{num_total,jdbcType=INTEGER},
        </if>
        <if test="num_able != null">
          num_able = #{num_able,jdbcType=INTEGER},
        </if>
        <if test="priority != null">
          priority = #{priority,jdbcType=INTEGER},
        </if>
        <if test="condition != null">
          `condition` = #{condition,jdbcType=VARCHAR},
        </if>
        <if test="condition_type != null">
          condition_type = #{condition_type,jdbcType=INTEGER},
        </if>
        <if test="programme != null">
          programme = #{programme,jdbcType=VARCHAR},
        </if>
        <if test="programme_type != null">
          programme_type = #{programme_type,jdbcType=INTEGER},
        </if>
        <if test="type != null">
          type = #{type,jdbcType=INTEGER},
        </if>
        <if test="use_start_datetime != null">
          use_start_datetime = #{use_start_datetime,jdbcType=TIMESTAMP},
        </if>
        <if test="use_end_datetime != null">
          use_end_datetime = #{use_end_datetime,jdbcType=TIMESTAMP},
        </if>
        <if test="receive_start_datetime != null">
          receive_start_datetime = #{receive_start_datetime,jdbcType=TIMESTAMP},
        </if>
        <if test="create_time != null">
          create_time = #{create_time,jdbcType=TIMESTAMP},
        </if>
        <if test="receive_end_datetime != null">
          receive_end_datetime = #{receive_end_datetime,jdbcType=TIMESTAMP},
        </if>
        <if test="verify != null">
          verify = #{verify,jdbcType=INTEGER},
        </if>
        <if test="verify_comments != null">
          verify_comments = #{verify_comments,jdbcType=VARCHAR},
        </if>
        <if test="create_user != null">
          create_user = #{create_user,jdbcType=BIGINT},
        </if>
        <if test="verify_user != null">
          verify_user = #{verify_user,jdbcType=BIGINT},
        </if>
        <if test="is_valid != null">
          is_valid = #{is_valid,jdbcType=INTEGER},
        </if>
        <if test="deliver_datetime != null">
          deliver_datetime = #{deliver_datetime,jdbcType=TIMESTAMP},
        </if>
      </trim>
    </if>
  </insert>
  <select id="countByExample" parameterType="com.aobei.train.model.CouponExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    select count(*) from coupon
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    update coupon
    <set>
      <if test="record.coupon_id != null">
        coupon_id = #{record.coupon_id,jdbcType=BIGINT},
      </if>
      <if test="record.name != null">
        name = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.descript != null">
        descript = #{record.descript,jdbcType=VARCHAR},
      </if>
      <if test="record.plan_money != null">
        plan_money = #{record.plan_money,jdbcType=INTEGER},
      </if>
      <if test="record.valid != null">
        valid = #{record.valid,jdbcType=INTEGER},
      </if>
      <if test="record.exclusive != null">
        exclusive = #{record.exclusive,jdbcType=INTEGER},
      </if>
      <if test="record.num_limit != null">
        num_limit = #{record.num_limit,jdbcType=INTEGER},
      </if>
      <if test="record.num_total != null">
        num_total = #{record.num_total,jdbcType=INTEGER},
      </if>
      <if test="record.num_able != null">
        num_able = #{record.num_able,jdbcType=INTEGER},
      </if>
      <if test="record.priority != null">
        priority = #{record.priority,jdbcType=INTEGER},
      </if>
      <if test="record.condition != null">
        `condition` = #{record.condition,jdbcType=VARCHAR},
      </if>
      <if test="record.condition_type != null">
        condition_type = #{record.condition_type,jdbcType=INTEGER},
      </if>
      <if test="record.programme != null">
        programme = #{record.programme,jdbcType=VARCHAR},
      </if>
      <if test="record.programme_type != null">
        programme_type = #{record.programme_type,jdbcType=INTEGER},
      </if>
      <if test="record.type != null">
        type = #{record.type,jdbcType=INTEGER},
      </if>
      <if test="record.use_start_datetime != null">
        use_start_datetime = #{record.use_start_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.use_end_datetime != null">
        use_end_datetime = #{record.use_end_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.receive_start_datetime != null">
        receive_start_datetime = #{record.receive_start_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.create_time != null">
        create_time = #{record.create_time,jdbcType=TIMESTAMP},
      </if>
      <if test="record.receive_end_datetime != null">
        receive_end_datetime = #{record.receive_end_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.verify != null">
        verify = #{record.verify,jdbcType=INTEGER},
      </if>
      <if test="record.verify_comments != null">
        verify_comments = #{record.verify_comments,jdbcType=VARCHAR},
      </if>
      <if test="record.create_user != null">
        create_user = #{record.create_user,jdbcType=BIGINT},
      </if>
      <if test="record.verify_user != null">
        verify_user = #{record.verify_user,jdbcType=BIGINT},
      </if>
      <if test="record.is_valid != null">
        is_valid = #{record.is_valid,jdbcType=INTEGER},
      </if>
      <if test="record.deliver_datetime != null">
        deliver_datetime = #{record.deliver_datetime,jdbcType=TIMESTAMP},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    update coupon
    set coupon_id = #{record.coupon_id,jdbcType=BIGINT},
      name = #{record.name,jdbcType=VARCHAR},
      descript = #{record.descript,jdbcType=VARCHAR},
      plan_money = #{record.plan_money,jdbcType=INTEGER},
      valid = #{record.valid,jdbcType=INTEGER},
      exclusive = #{record.exclusive,jdbcType=INTEGER},
      num_limit = #{record.num_limit,jdbcType=INTEGER},
      num_total = #{record.num_total,jdbcType=INTEGER},
      num_able = #{record.num_able,jdbcType=INTEGER},
      priority = #{record.priority,jdbcType=INTEGER},
      `condition` = #{record.condition,jdbcType=VARCHAR},
      condition_type = #{record.condition_type,jdbcType=INTEGER},
      programme = #{record.programme,jdbcType=VARCHAR},
      programme_type = #{record.programme_type,jdbcType=INTEGER},
      type = #{record.type,jdbcType=INTEGER},
      use_start_datetime = #{record.use_start_datetime,jdbcType=TIMESTAMP},
      use_end_datetime = #{record.use_end_datetime,jdbcType=TIMESTAMP},
      receive_start_datetime = #{record.receive_start_datetime,jdbcType=TIMESTAMP},
      create_time = #{record.create_time,jdbcType=TIMESTAMP},
      receive_end_datetime = #{record.receive_end_datetime,jdbcType=TIMESTAMP},
      verify = #{record.verify,jdbcType=INTEGER},
      verify_comments = #{record.verify_comments,jdbcType=VARCHAR},
      create_user = #{record.create_user,jdbcType=BIGINT},
      verify_user = #{record.verify_user,jdbcType=BIGINT},
      is_valid = #{record.is_valid,jdbcType=INTEGER},
      deliver_datetime = #{record.deliver_datetime,jdbcType=TIMESTAMP}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.aobei.train.model.Coupon">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    update coupon
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="descript != null">
        descript = #{descript,jdbcType=VARCHAR},
      </if>
      <if test="plan_money != null">
        plan_money = #{plan_money,jdbcType=INTEGER},
      </if>
      <if test="valid != null">
        valid = #{valid,jdbcType=INTEGER},
      </if>
      <if test="exclusive != null">
        exclusive = #{exclusive,jdbcType=INTEGER},
      </if>
      <if test="num_limit != null">
        num_limit = #{num_limit,jdbcType=INTEGER},
      </if>
      <if test="num_total != null">
        num_total = #{num_total,jdbcType=INTEGER},
      </if>
      <if test="num_able != null">
        num_able = #{num_able,jdbcType=INTEGER},
      </if>
      <if test="priority != null">
        priority = #{priority,jdbcType=INTEGER},
      </if>
      <if test="condition != null">
        `condition` = #{condition,jdbcType=VARCHAR},
      </if>
      <if test="condition_type != null">
        condition_type = #{condition_type,jdbcType=INTEGER},
      </if>
      <if test="programme != null">
        programme = #{programme,jdbcType=VARCHAR},
      </if>
      <if test="programme_type != null">
        programme_type = #{programme_type,jdbcType=INTEGER},
      </if>
      <if test="type != null">
        type = #{type,jdbcType=INTEGER},
      </if>
      <if test="use_start_datetime != null">
        use_start_datetime = #{use_start_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="use_end_datetime != null">
        use_end_datetime = #{use_end_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="receive_start_datetime != null">
        receive_start_datetime = #{receive_start_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="create_time != null">
        create_time = #{create_time,jdbcType=TIMESTAMP},
      </if>
      <if test="receive_end_datetime != null">
        receive_end_datetime = #{receive_end_datetime,jdbcType=TIMESTAMP},
      </if>
      <if test="verify != null">
        verify = #{verify,jdbcType=INTEGER},
      </if>
      <if test="verify_comments != null">
        verify_comments = #{verify_comments,jdbcType=VARCHAR},
      </if>
      <if test="create_user != null">
        create_user = #{create_user,jdbcType=BIGINT},
      </if>
      <if test="verify_user != null">
        verify_user = #{verify_user,jdbcType=BIGINT},
      </if>
      <if test="is_valid != null">
        is_valid = #{is_valid,jdbcType=INTEGER},
      </if>
      <if test="deliver_datetime != null">
        deliver_datetime = #{deliver_datetime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where coupon_id = #{coupon_id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.aobei.train.model.Coupon">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 06 19:03:37 CST 2018.
    -->
    update coupon
    set name = #{name,jdbcType=VARCHAR},
      descript = #{descript,jdbcType=VARCHAR},
      plan_money = #{plan_money,jdbcType=INTEGER},
      valid = #{valid,jdbcType=INTEGER},
      exclusive = #{exclusive,jdbcType=INTEGER},
      num_limit = #{num_limit,jdbcType=INTEGER},
      num_total = #{num_total,jdbcType=INTEGER},
      num_able = #{num_able,jdbcType=INTEGER},
      priority = #{priority,jdbcType=INTEGER},
      `condition` = #{condition,jdbcType=VARCHAR},
      condition_type = #{condition_type,jdbcType=INTEGER},
      programme = #{programme,jdbcType=VARCHAR},
      programme_type = #{programme_type,jdbcType=INTEGER},
      type = #{type,jdbcType=INTEGER},
      use_start_datetime = #{use_start_datetime,jdbcType=TIMESTAMP},
      use_end_datetime = #{use_end_datetime,jdbcType=TIMESTAMP},
      receive_start_datetime = #{receive_start_datetime,jdbcType=TIMESTAMP},
      create_time = #{create_time,jdbcType=TIMESTAMP},
      receive_end_datetime = #{receive_end_datetime,jdbcType=TIMESTAMP},
      verify = #{verify,jdbcType=INTEGER},
      verify_comments = #{verify_comments,jdbcType=VARCHAR},
      create_user = #{create_user,jdbcType=BIGINT},
      verify_user = #{verify_user,jdbcType=BIGINT},
      is_valid = #{is_valid,jdbcType=INTEGER},
      deliver_datetime = #{deliver_datetime,jdbcType=TIMESTAMP}
    where coupon_id = #{coupon_id,jdbcType=BIGINT}
  </update>






 <!--user define select -->
  <resultMap id="couponMap" type="custom.bean.CouponResponse">
    <id column="coupon_id" jdbcType="BIGINT" property="coupon_id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="descript" jdbcType="VARCHAR" property="descript" />
    <result column="plan_money" jdbcType="INTEGER" property="plan_money" />
    <result column="valid" jdbcType="INTEGER" property="valid" />
    <result column="exclusive" jdbcType="INTEGER" property="exclusive" />
    <result column="num_limit" jdbcType="INTEGER" property="num_limit" />
    <result column="num_total" jdbcType="INTEGER" property="num_total" />
    <result column="num_able" jdbcType="INTEGER" property="num_able" />
    <result column="priority" jdbcType="INTEGER" property="priority" />
    <result column="condition" jdbcType="VARCHAR" property="condition" />
    <result column="condition_type" jdbcType="INTEGER" property="condition_type" />
    <result column="programme" jdbcType="VARCHAR" property="programme" />
    <result column="programme_type" jdbcType="INTEGER" property="programme_type" />
    <result column="use_start_datetime" jdbcType="TIMESTAMP" property="use_start_datetime" />
    <result column="use_end_datetime" jdbcType="TIMESTAMP" property="use_end_datetime" />
    <result column="receive_start_datetime" jdbcType="TIMESTAMP" property="receive_start_datetime" />
    <result column="create_time" jdbcType="TIMESTAMP" property="create_time" />
    <result column="receive_end_datetime" jdbcType="TIMESTAMP" property="receive_end_datetime" />
    <result column="coupon_receive_id" jdbcType="BIGINT" property="coupon_receive_id" />
    <result column="uid" jdbcType="BIGINT" property="uid" />
    <result column="pay_order_id" jdbcType="VARCHAR" property="pay_order_id" />
    <result column="receive_datetime" jdbcType="TIMESTAMP" property="receive_datetime" />
    <result column="use_datetime" jdbcType="TIMESTAMP" property="use_datetime" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="verification" jdbcType="INTEGER" property="verification" />
    <result column="deleted" jdbcType="INTEGER" property="deleted" />

  </resultMap>


  <sql id="Receive_Column_List">
    t1.coupon_id, name, descript, plan_money, valid, exclusive, num_limit, num_total, num_able,
    priority, `condition`, condition_type, programme, programme_type, use_start_datetime as useStartTime,
    use_end_datetime as useEndTime, receive_start_datetime, create_time, receive_end_datetime,
    coupon_receive_id, uid, pay_order_id, receive_datetime, use_datetime,
    status, verification, deleted
  </sql>

  <select id="selectByUid" parameterType="map" resultMap="couponMap">
    select
    <include refid="Receive_Column_List" />
    from coupon t1 left join coupon_receive t2
    on t1.coupon_id = t2.coupon_id
    where t2.uid = #{uid}
    and t1.valid=1
    and t2.status=2
    and t1.use_start_datetime <![CDATA[ <= ]]> now()
    and t1.use_end_datetime <![CDATA[ >= ]]> now()
    order by t1.use_end_datetime
    limit #{limitStart} , #{limitEnd}
  </select>






</mapper>